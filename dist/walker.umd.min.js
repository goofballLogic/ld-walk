(function(a,b){if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.walker=c.exports}})("undefined"==typeof globalThis?"undefined"==typeof self?this:self:globalThis,function(a){"use strict";function b(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function c(a){for(var c,e=1;e<arguments.length;e++)c=null==arguments[e]?{}:arguments[e],e%2?b(Object(c),!0).forEach(function(b){d(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):b(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))});return a}function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function f(a){return function(){var b=this,c=arguments;return new Promise(function(d,f){function g(a){e(i,d,f,g,h,"next",a)}function h(a){e(i,d,f,g,h,"throw",a)}var i=a.apply(b,c);g(void 0)})}}Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=void 0;a["default"]={walk:function walk(a){function b(){return e.apply(this,arguments)}function e(){return e=f(regeneratorRuntime.mark(function a(b){var c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.expand(b);case 3:return c=a.sent,a.abrupt("return",n(c,{}));case 7:if(a.prev=7,a.t0=a["catch"](0),!(a.t0.details&&"loading document failed"==a.t0.details.code)){a.next=11;break}return a.abrupt("return",null);case 11:throw a.t0;case 12:case"end":return a.stop();}},a,null,[[0,7]])})),e.apply(this,arguments)}function g(){return h.apply(this,arguments)}function h(){return h=f(regeneratorRuntime.mark(function a(d){var e,f,h,j,k,l,m,o,p,q,r,s,t,u,v,w;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=d.pathContext,f=d.walkFrom,h=d.walkTo,j=d.lastFetched,k=d.query,l=d.suppressFinalDereferencing,a.next=3,i(e,h);case 3:if(m=a.sent,j){a.next=9;break}return a.next=7,b(f);case 7:k=a.sent,j=f;case 9:o=0;case 10:if(!(k&&k.query&&m.length)){a.next=26;break}if(p=m.shift(),o++,q="> ".concat(p),r=k.query(q),r){a.next=23;break}if(s=k.query("> @id"),!s){a.next=23;break}return j=s,a.next=21,b(s);case 21:t=a.sent,r=t&&t.query(q);case 23:k=r,a.next=10;break;case 26:if(!(!l&&k&&k.query)){a.next=35;break}if(u=k.query("> @id"),!(u&&u!==j)){a.next=35;break}return a.next=31,b(u);case 31:if(a.t0=a.sent,a.t0){a.next=34;break}a.t0=k;case 34:k=a.t0;case 35:return v=h.split(" "),w={walked:v.slice(0,o),toQuery:function toQuery(a){return k&&n(k.json(),a||{})},continueTo:function continueTo(a,b){return k?g(c({},b,{pathContext:e,walkTo:a,lastFetched:j,query:k})):w},succeeded:!!k},w.succeeded||(w.notWalked=v.slice(o)),a.abrupt("return",w);case 39:case"end":return a.stop();}},a)})),h.apply(this,arguments)}function i(){return j.apply(this,arguments)}function j(){return j=f(regeneratorRuntime.mark(function a(b,c){var e,f;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e={"@context":b,"@graph":c.split(" ").map(function(a){return d({},a,[])})},a.next=3,m.expand(e);case 3:return f=a.sent,a.abrupt("return",f.map(function(a){return Object.keys(a)[0]}));case 5:case"end":return a.stop();}},a)})),j.apply(this,arguments)}function k(a,b){return{pathContext:a,walkFrom:b,to:function to(d,e){return g(c({},e,{pathContext:a,walkFrom:b,walkTo:d}))}}}var l=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},m=l.jsonld,n=l["ld-query"];return{pathContext:a,from:k.bind(this,a)}}}});
